<div class="container mt-12">
  <div class="tab-content mt-3" id="facilityTabsContent">
    <!-- Aba Facility -->
    <div class="tab-pane fade show active" id="facility" role="tabpanel" aria-labelledby="facility-tab">
      <div class="row align-items-start layout-container">
        <!-- Coluna da Foto -->
        <div class="col-md-3 col-12 mb-4 mb-md-0 photo-gallery">
          <!-- Carousel Vertical de Fotos -->
          <div class="carousel-photos mt-3" style="max-height: 400px; overflow-y: auto;">
            <!-- Foto principal como a primeira imagem -->
            <div class="carousel-photo" style="margin-bottom: 10px; position: relative;">
              <div class="photo-preview d-flex align-items-center justify-content-center"
                style="width: 100%; height: 100px; background-color: #f8f9fa; border-radius: 4px; overflow: hidden; cursor: pointer;"
                (click)="onExtraPhotoSelected(0)">
                <img *ngIf="imagePreview" [src]="imagePreview" alt="Photo Preview"
                  class="img-fluid" style="max-width: 100%; max-height: 100%; object-fit: cover;" />
                <div *ngIf="!imagePreview" class="text-muted d-flex flex-column align-items-center">
                  <i class="fa-solid fa-image" style="font-size: 1.5rem;"></i>
                </div>
              </div>
            </div>
            <!-- Fotos extras do carousel -->
            <div *ngFor="let photo of extraPhotos; let i = index" class="carousel-photo"
              style="margin-bottom: 10px; position: relative;">
              <div class="photo-preview d-flex align-items-center justify-content-center"
                style="width: 100%; height: 100px; background-color: #f8f9fa; border-radius: 4px; overflow: hidden; cursor: pointer;"
                (click)="onExtraPhotoSelected(i + 1)">
                <img *ngIf="photo" [src]="photo" alt="Photo Preview"
                  class="img-fluid" style="max-width: 100%; max-height: 100%; object-fit: cover;" />
                <div *ngIf="!photo" class="text-muted d-flex flex-column align-items-center">
                  <i class="fa-solid fa-image" style="font-size: 1.5rem;"></i>
                </div>
              </div>
            </div>
          </div>
          <!-- Bot찾o para upload de imagens -->
          <div class="button-container"
            style="position: relative; bottom: -8px; right: -25px; display: flex; flex-direction: row; align-items: center; gap: 25px;">
            <!-- Bot찾o de Upload -->
            <button class="btn btn-primary"
              style="border-radius: 50%; width: 40px; height: 40px; background-color: #5B84C4; color: #FFF; border: #5B84C4;"
              (click)="fileInput.click()">
              <i class="fa-solid fa-download"></i>
            </button>
            <input type="file" accept="image/*" style="display: none;" (change)="onFileSelected($event)" #fileInput />
            <!-- Bot찾o de C창mera -->
            <button class="btn btn-primary"
              style="border-radius: 50%; width: 40px; height: 40px; background-color: #5B84C4; color: #FFF; border: #5B84C4;">
              <i class="fa-solid fa-camera"></i>
            </button>
            <input id="cameraInput" type="file" accept="image/*" capture="environment" style="display: none;" (change)="onFileSelected($event)"
              #fileInput />
          </div>
        </div>
        <div class="col-md-9 col-12">
          <div class="row d-flex justify-content-end">
            <div class="col-12 col-md-auto trash d-flex justify-content-end pe-4 fs-5" style="color: #AEAEB2;">
              <i class="fa-solid fa-reply" (click)="backFacilities()"></i>
            </div>
            <div class="col-12 col-md-auto trash d-flex justify-content-end pe-4 fs-5 spacing-trash" style="color: #AEAEB2;">
              <i class="fa-solid fa-share"></i>
            </div>
            <div class="col-12 col-md-auto trash d-flex justify-content-end pe-4 fs-5" style="color: #C53232;">
              <i class="fa-solid fa-trash-can" (click)="deleteFacility()"></i>
            </div>
            <form [formGroup]="form" class="row g-3">

                        <!-- Facility Name e Facility Owner -->
                        <form [formGroup]="form" class="row g-3">
                            <div class="col-md-12">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Name</mat-label>
                                <input matInput type="text" formControlName="name" required />
                              </mat-form-field>
                            </div>
                            <div class="col-md-12">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Facility Owner</mat-label>
                                <mat-select formControlName="user_id">
                                  <mat-option *ngFor="let user of users" [value]="user.id">
                                    {{ user.name }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                            
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Number</mat-label>
                                <input matInput type="text" formControlName="number" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Used</mat-label>
                                <input matInput type="text" formControlName="used" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Size</mat-label>
                                <input matInput type="text" formControlName="size" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Unity</mat-label>
                                <input matInput type="text" formControlName="unity" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Report Last Update</mat-label>
                                <input matInput type="text" formControlName="report_last_update" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Consultant Name</mat-label>
                                <input matInput type="text" formControlName="consultant_name" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-12">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Address</mat-label>
                                <input matInput type="text" formControlName="address" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>City</mat-label>
                                <input matInput type="text" formControlName="city" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Region</mat-label>
                                <input matInput type="text" formControlName="region" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Country</mat-label>
                                <input matInput type="text" formControlName="country" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Zip Code</mat-label>
                                <input matInput type="text" formControlName="zip_code" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Year Installed</mat-label>
                                <input matInput type="text" formControlName="year_installed" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Replacement Cost</mat-label>
                                <input matInput type="text" formControlName="replacement_cost" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-12">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Description</mat-label>
                                <textarea matInput rows="3" formControlName="description"></textarea>
                              </mat-form-field>
                            </div>
                          </form>                          
                      </form>
                </div>
        </div>

        <!-- Aba Components -->
        <div class="tab-pane fade" id="components" role="tabpanel" aria-labelledby="components-tab">
            <h5>Components Section</h5>
        </div>

        <!-- Aba Actions -->
        <div class="tab-pane fade" id="actions" role="tabpanel" aria-labelledby="actions-tab">
            <h5>Actions Section</h5>
        </div>
    </div>
</div>
