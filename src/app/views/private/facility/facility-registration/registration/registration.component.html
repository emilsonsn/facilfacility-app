<div class="container mt-12">
    <div class="tab-content mt-3" id="facilityTabsContent">
        <!-- Aba Facility -->
        <div class="tab-pane fade show active" id="facility" role="tabpanel" aria-labelledby="facility-tab">
            <div class="row align-items-start layout-container">
                <!-- Coluna da Foto -->
                <div class="col-md-3 col-12 mb-4 mb-md-0 photo-gallery">
                  <!-- Foto Principal -->
                  <div class="main-photo">
                    <div class="card-body d-flex align-items-center justify-content-center"
                      style="height: 200px; background-color: #f8f9fa; border-radius: 10px; overflow: hidden;">
                      <img *ngIf="imagePreview" [src]="imagePreview" alt="Preview" class="img-fluid"
                        style="max-height: 100%; max-width: 100%; object-fit: cover;" />
                      <div *ngIf="!imagePreview" class="text-muted d-flex flex-column align-items-center">
                        <i class="fa-solid fa-image" style="font-size: 2rem;"></i>
                        <span>Select an image</span>
                      </div>
                    </div>
                        <button class="btn btn-primary"
                            style="position: relativd; bottom: 10px; right: 10pxpx; border-radius: 50%; width: 50px; height: 50px;"
                            (click)="fileInput.click()">
                            <i class="fa-solid fa-download"></i>
                        </button>
                        <input type="file" accept="image/*" style="display: none;" (change)="onFileSelected($event)"
                            #fileInput />
                    </div>

                    <!-- Duas Fotos Menores -->
                    <div class="small-photos d-flex mt-3">
                        <div *ngFor="let photo of smallPhotos; let i = index" class="small-photo"
                            style="margin-right: 10px; position: relative;">
                            <div class="photo-preview d-flex align-items-center justify-content-center"
                                style="width: 80px; height: 80px; background-color: #f8f9fa; border-radius: 4px; overflow: hidden; cursor: pointer;"
                                (click)="onSmallPhotoSelected(i)">
                                <img *ngIf="imagePreview" [src]="imagePreview" alt="Small Photo Preview"
                                    class="img-fluid" style="max-width: 100%; max-height: 100%; object-fit: cover;" />
                                <div *ngIf="!photo" class="text-muted d-flex flex-column align-items-center">
                                    <i class="fa-solid fa-image" style="font-size: 1.5rem;"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- TrÃªs Fotos Menores -->
                    <div class="extra-photos d-flex mt-3">
                        <div *ngFor="let photo of extraPhotos; let i = index" class="extra-photo"
                            style="margin-right: 10px; position: relative;">
                            <div class="photo-preview d-flex align-items-center justify-content-center"
                                style="width: 60px; height: 60px; background-color: #f8f9fa; border-radius: 4px; overflow: hidden; cursor: pointer;"
                                (click)="onExtraPhotoSelected(i)">
                                <img *ngIf="imagePreview" [src]="imagePreview" alt="Small Photo Preview"
                                    alt="Extra Photo Preview" class="img-fluid"
                                    style="max-width: 100%; max-height: 100%; object-fit: cover;" />
                                <div *ngIf="!photo" class="text-muted d-flex flex-column align-items-center">
                                    <i class="fa-solid fa-image" style="font-size: 1.2rem;"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-9 col-12">
                  <div class="row d-flex justify-content-end">
                    <div class="col-12 col-md-auto trash d-flex justify-content-end pe-4 fs-5" style="color: #AEAEB2;">
                      <i class="fa-solid fa-reply" (click)="backFacilities()"></i>
                    </div>
                    <div class="col-12 col-md-auto trash d-flex justify-content-end pe-4 fs-5 spacing-trash" style="color: #AEAEB2;">
                      <i class="fa-solid fa-share"></i>
                    </div>
                    <div class="col-12 col-md-auto trash d-flex justify-content-end pe-4 fs-5" style="color: #C53232;">
                      <i class="fa-solid fa-trash-can" (click)="deleteFacility()"></i>
                    </div>
                        <!-- Facility Name e Facility Owner -->
                        <form [formGroup]="form" class="row g-3">
                            <div class="col-md-12">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Name</mat-label>
                                <input matInput type="text" formControlName="name" required />
                              </mat-form-field>
                            </div>
                            <div class="col-md-12">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Facility Owner</mat-label>
                                <mat-select formControlName="user_id">
                                  <mat-option *ngFor="let user of users" [value]="user.id">
                                    {{ user.name }}
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                            
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Number</mat-label>
                                <input matInput type="text" formControlName="number" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Used</mat-label>
                                <input matInput type="text" formControlName="used" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Size</mat-label>
                                <input matInput type="text" formControlName="size" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Unity</mat-label>
                                <input matInput type="text" formControlName="unity" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Report Last Update</mat-label>
                                <input matInput type="text" formControlName="report_last_update" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Consultant Name</mat-label>
                                <input matInput type="text" formControlName="consultant_name" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-12">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Address</mat-label>
                                <input matInput type="text" formControlName="address" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>City</mat-label>
                                <input matInput type="text" formControlName="city" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Region</mat-label>
                                <input matInput type="text" formControlName="region" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Country</mat-label>
                                <input matInput type="text" formControlName="country" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Zip Code</mat-label>
                                <input matInput type="text" formControlName="zip_code" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Year Installed</mat-label>
                                <input matInput type="text" formControlName="year_installed" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-6">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Replacement Cost</mat-label>
                                <input matInput type="text" formControlName="replacement_cost" />
                              </mat-form-field>
                            </div>
                            <div class="col-md-12">
                              <mat-form-field appearance="outline" class="w-100 mb-3">
                                <mat-label>Description</mat-label>
                                <textarea matInput rows="3" formControlName="description"></textarea>
                              </mat-form-field>
                            </div>
                          </form>                          
                    </div>
                </div>
            </div>
        </div>

        <!-- Aba Components -->
        <div class="tab-pane fade" id="components" role="tabpanel" aria-labelledby="components-tab">
            <h5>Components Section</h5>
        </div>

        <!-- Aba Actions -->
        <div class="tab-pane fade" id="actions" role="tabpanel" aria-labelledby="actions-tab">
            <h5>Actions Section</h5>
        </div>
    </div>
</div>
